{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template local_musi/musi_bookingoption_menu

    Classes required for JS:
    * none

    Data attributes required for JS:
    * data-region

    Example context (json):
    {
        "itemid" : 3,
        "componentname" : "local_musi",
        "modalcounter" : 1,
        "modaltitle" : "main",
        "userid" : 133,
        "editoptionurl" : "URL",
        "manageresponsesurl" : "URL",
        "optiondatesteachersurl" : "URL",
        "showundocancel" : true,
        "undocancellink" : "URL",
        "showcancel" : true,
        "cancellink": "URL"
    }
}}

{{#optiondatesteachersurl}}
<div id="coltextlink-dropdown" class="dropdown">
  <button class="btn btn-white dropdown-toggle mt-1" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    <i class="fa fa-gear" aria-hidden="true"></i>
  </button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
      <h6 class="dropdown-header">{{#str}} actions {{/str}}</h6>
      {{#editoptionurl}}
      <a class="dropdown-item editoption" href="{{editoptionurl}}" target="_self">
        <i class="fa fa-edit fa-fw" aria-hidden="true"></i> {{#str}} editbookingoption, mod_booking {{/str}}
      </a>
      {{/editoptionurl}}
      {{#sendmailtoallbookedusers}}
      <a class="dropdown-item sendmailtoallbookedusers" href="{{mailtobookeduserslink}}" target="_self">
        <i class="fa fa-envelope fa-fw" aria-hidden="true"></i> {{#str}} sendmailtoallbookedusers, mod_booking {{/str}}
      </a>
      {{/sendmailtoallbookedusers}}
      {{#editavailability}}
      <a class="dropdown-item editavailability" href="#" target="_self" data-optionid="{{optionid}}">
        <i class="fa fa-unlock-alt fa-fw" aria-hidden="true"></i> {{#str}} editavailability, local_musi {{/str}}
      </a>
      {{/editavailability}}
      {{#manageresponsesurl}}
      <a class="dropdown-item manageresponses" href="{{manageresponsesurl}}" target="_self">
        <i class="fa fa-ticket fa-fw" aria-hidden="true"></i> {{#str}} manageresponses, mod_booking {{/str}}
      </a>
      {{/manageresponsesurl}}
      {{#showcancel}}{{{cancellink}}}{{/showcancel}}
      {{#showundocancel}}{{{undocancellink}}}{{/showundocancel}}
      {{#optiondatesteachersurl}}
      <a class="dropdown-item" href="{{optiondatesteachersurl}}" target="_self">
        <i class="fa fa-exchange fa-fw" aria-hidden="true"></i> {{#str}} optiondatesteachersreport, mod_booking {{/str}}
      </a>
      {{/optiondatesteachersurl}}
  </div>
</div>
{{/optiondatesteachersurl}}

{{#js}}
    require(['local_musi/easyavailabilitymodal'], function(fn) {
        fn.init(
          '{{optionid}}',
          'a.editavailability[data-optionid="{{optionid}}"]',
          '{{#str}} editavailability, local_musi {{/str}}'
        );
    });
{{/js}}
